##  腾讯社招iOS面试记录:2018-07

> https://juejin.im/post/5b3c40f4e51d45191a0d0aae

> 作者：AceDong

> 链接：https://juejin.im/post/5b3c40f4e51d45191a0d0aae

### 一面电话面试
* 先简单自我介绍一下自己
* 对mrc和arc的理解
* 谈谈对自动释放池的理解
* 自动释放池在mrc和arc区别
* 多层自动释放池嵌套的对象在哪一层释放
* 对于block，理解，mrc和arc下有什么区别，使用注意事项
* 对于深拷贝和浅拷贝的理解
* 对于strong weak，atomic等等理解
* weak原理
* 如果属性完全不加修饰词入weak，atomic，系统会怎么处理
* 简述下block的实现
* 描述下IM系统如何保证消息不丢
* IM数据库如何设计表
* C++引用和指针有什么区别
* Http协议30x的错误是什么
* 谈谈你懂runloop得理解：由浅入深
* 谈谈对多线程理解:由浅入深
* 谈谈category和extension区别，系统如何底层实现category
* 谈谈消息转发机制实现
* 谈谈事件响应链，如何响应view之外的事件
* 界面性能优化

### 二面视频面试

- 聊一聊过往项目中你觉得收获最大的一个模块
	- 就说了上个项目做类似朋友圈的优化思路，谈到了空间换时间，缓存，渲染相关的技术点
	- 需求痛点：界面卡顿，体验不好 解决方案：探索的思路-》解决方案
	- 该模块引申到的新话题还涉及到了增量更新，内存缓存，本地缓存
	- 细节上还谈到了富文本绘制，Coretext框架的使用
	- 上个项目中存在视频裁剪，录制等功能。
面试官对这块有些兴趣，就聊到了视频裁剪的实现，因为我们项目中使用了ffmpeg做的裁剪功能。包括视频下载，数据裁剪封装，引申聊到了边预览边裁剪，因为我之前的项目并没有做到预览裁剪这块。也就没有深入聊下去了。期间简单谈到了**rstp协议，和HLS，rtmp等协议的对比**，信令协议。虽然之前都有看过协议的大致实现和预览，但是实际使用的是SDK，没有实践加持。这部分知识是很容易忘记的。大致聊了下总体差别
	- 项目中有用到过DLNA投屏协议
说来又是惭愧，自己完整做过的项目，过去了两年，居然连流程，协议都只是零零散散的记起来了，很勉强的说出了大概实现流程。知道最后才记起来是**soap协议**。当初为了做这个可是研究了整整两周的。面试官应该也实现过这个需求，提到了**视频盒子断线如何检测做处理**，什么原因导致的。由于之前我们的产品需求比较简单，没有特别完善。这里我也只能说了大概
	- 项目做过视频播放需求，使用的AVPlayer框架（重点聊）
面试官问到，**AVPlayer怎么监听视频缓冲状态的，有哪几种状态**。说来又是惭愧，我只记得是KVO监听的。具体的API已经记不清了。
接着面试官问到这个需求遇到过哪些坑，怎么解决的。
这个还真的有，首先是回调播放进度在拖动时候错乱，加载某些小视频的适配，首帧出图很慢。KVO的模式不灵活。**缓冲进度不受我们控制**。短视频可能直接迅速缓冲到底。还是之前的思路,需求痛点有了.解决方案：探索的思路-》解决方案。
不得不说之前做的产品，都是需求驱动，解决了需求，很多时候就没有极客精神，在深入的去探讨。这块真的是差！
	- 如果网络不好，首帧出图之后，如何优化后续播放不卡顿 当时已经一脸懵逼了：就提到了可以适当加大缓冲区，等到足够的I帧数据再开始播放
 
- 项目聊完了之后，又追问了iOS的一些基础问题，属性和成员变量区别，strong，atomic关键字，怎么理解runloop，runloop有几种状态等等 

- 非常有意思的算法题
	- 有15个瓶子，其中最多有一瓶有毒，现在有四只老鼠，喝了有毒的水之后，第二天就会死。如何在第二天就可以判断出哪个瓶子有毒
答：开始我想到的是常规思路二分法，717，和面试官说了，发现四只老鼠根本不够，面试官友好的提示从老鼠面去想，这时候很快想到了一个老鼠有死和不死，也就0和1两个状态，四只老鼠有16个组合，正好是足够的。但是怎么分配瓶子，还没想好，演算了一会儿，因为面试官这边时间有限，就说思路是正确的。下面有兴趣在看怎么分哈。面试就到此结束了。
 



## 链接

- [面试题系列目录](README.md)
-  **上一份**: [阿里腾讯百度头条美团iOS面试总结](interview-iOS-14-阿里腾讯百度头条美团iOS面试总结.md)
